<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                           http://www.springframework.org/schema/util
                           http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <bean id="TransactionView" parent="Uif-KsaFormView" p:footer.render="false">
        <property name="title" value="Student Transaction Overview"/>
        <property name="headerText" value="Transaction Overview"/>
        <property name="formClass" value="com.sigmasys.kuali.ksa.krad.form.TransactionForm"/>
        <property name="theme" ref="Uif-KsaTheme"/>
        <property name="entryPageId" value="ViewTransactions"/>
        <property name="navigation">
            <ref bean="transactionNavigation"/>
        </property>
        <property name="items">
            <list merge="true">
                <bean parent="Uif-Page" p:id="ViewTransactions" p:title="View Transactions">
                    <!--<property name="headerText" value="View Transactions"/>-->
                    <property name="items">
                        <list>
                            <bean id="viewTransactionAccountInfo" parent="Uif-HorizontalBoxSection">
                                <property name="items">
                                <list>
                                    <bean parent="Uif-HeaderTwo" p:headerText="@{account.compositeDefaultPersonName}"/>
                                    <bean parent="Uif-InputField" p:propertyName="account.id" p:style="margin-top: 15px;" p:readOnly="@{true}"/>
                                    <bean parent="Uif-HelpImage" p:source="../images/alert.png" p:style="margin-top: 15px;" p:altText="" p:title="">
                                        <property name="toolTip">
                                            <bean parent="Uif-Tooltip" p:tooltipContent="@{alertTooltip}"/>
                                        </property>
                                    </bean>
                                    <bean parent="Uif-InputField" p:propertyName="alertSize" p:style="margin-top: 15px;" p:readOnly="@{true}"/>
                                    <bean parent="Uif-HelpImage" p:source="../images/flag.png" p:style="margin-top: 15px;" p:altText="" p:title="">
                                        <property name="toolTip">
                                            <bean parent="Uif-Tooltip" p:tooltipContent="@{flagTooltip}"/>
                                        </property>
                                    </bean>
                                    <bean parent="Uif-InputField" p:propertyName="flagSize" p:style="margin-top: 15px;" p:readOnly="@{true}"/>

                                </list>
                                </property>
                            </bean>
                            <ref bean="transactionDisplay"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <bean name="transactionNavigation" parent="Uif-KsaPageNavigation">
        <property name="items">
            <list>
                <bean parent="Uif-HeaderTwo" p:headerText="Accounts"/>
                <bean parent="Uif-Link" p:linkText="Advanced Search" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=CurrencyPage"/>
                <bean parent="Uif-Link" p:linkText="Quick View" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=RollupPage"/>
                <bean parent="Uif-Link" p:linkText="Transactions" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=TagPage"/>
                <bean parent="Uif-Link" p:linkText="Make a Payment" p:target="_self"
                      p:href="transactionTypeView?methodToCall=get&amp;viewId=TransactionTypeView&amp;pageId=TransactionTypePage"/>
                <bean parent="Uif-Link" p:linkText="Add a Charge" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=BankTypePage"/>
                <bean parent="Uif-Link" p:linkText="Add a Deferment" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=TaxTypePage"/>
                <bean parent="Uif-Link" p:linkText="Write-Off Account" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=LatePeriodPage"/>
                <bean parent="Uif-Link" p:linkText="Biographic Information" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=AccountStatusTypePage"/>
                <bean parent="Uif-Link" p:linkText="Flags" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=FlagTypePage"/>
                <bean parent="Uif-Link" p:linkText="Alerts" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=ActivityTypePage"/>
                <bean parent="Uif-Link" p:linkText="Memos" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=ActivityTypePage"/>
                <bean parent="Uif-Link" p:linkText="Generate 1098T" p:target="_self"
                      p:href="settingsView?methodToCall=get&amp;viewId=SettingsView&amp;pageId=ActivityTypePage"/>
            </list>
        </property>
    </bean>

    <bean name="transactionDisplay" parent="Uif-VerticalBoxSection">
        <property name="items">
        <list>
            <bean parent="Uif-HorizontalFieldGroup" p:label="Filter Transactions">
                <property name="items">
                    <list>
                        <bean parent="Uif-VerticalBoxSubSection">
                            <property name="items">
                            <list>
                                <bean parent="Uif-InputField" p:propertyName="account.compositeDefaultPersonName" p:readOnly="@{true}"/>
                                <bean parent="Uif-InputField" p:propertyName="account.compositeDefaultPersonName" p:readOnly="@{true}"/>
                                <bean parent="Uif-InputField" p:propertyName="account.compositeDefaultPersonName" p:readOnly="@{true}"/>
                                <bean parent="Uif-InputField" p:propertyName="account.compositeDefaultPersonName" p:readOnly="@{true}"/>
                            </list>
                            </property>
                        </bean>
                        <bean parent="Uif-HorizontalBoxSubSection">
                            <property name="items">
                            <list>
                                <bean parent="Uif-InputField" p:propertyName="account.id" p:readOnly="@{true}"/>
                                <bean parent="Uif-InputField" p:propertyName="account.id" p:readOnly="@{true}"/>
                                <bean parent="Uif-InputField" p:propertyName="account.id" p:readOnly="@{true}"/>
                                <bean parent="Uif-InputField" p:propertyName="account.id" p:readOnly="@{true}"/>
                            </list>
                            </property>
                        </bean>
                    </list>
                </property>
            </bean>
            <bean parent="Uif-TabGroup"><property name="items"><list>
            <bean parent="Uif-VerticalBoxSection" p:headerText="Roll-up">
                <property name="items">
                    <list>
                        <bean id="rollupList" parent="Uif-TableCollectionSection" p:layoutManager.numberOfColumns="7" p:width="85%">
                            <property name="title" value="Roll-Up"/>
                            <property name="readOnly" value="true"/>
                            <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.krad.model.TransactionModel"/>
                            <property name="propertyName" value="rollupTransactions"/>
                            <property name="layoutManager.sequencePropertyName" value="id"/>
                            <property name="layoutManager.richTable.render" value="true"/>
                            <property name="layoutManager.renderSequenceField" value="false"/>
                            <property name="renderAddBlankLineButton" value="false" />
                            <property name="renderAddLine" value="false" />
                            <property name="layoutManager.applyDefaultCellWidths" value="false"/>
                            <property name="layoutManager.richTable.disableTableSort" value="false"/>
                            <property name="layoutManager.richTable.templateOptions">
                                <map merge="true">
                                    <entry key="bPaginate" value="false"/>
                                    <entry key="bInfo" value="false"/>
                                    <entry key="bFilter" value="false"/>
                                </map>
                            </property>
                            <property name="items">
                                <list>
                                    <bean parent="Uif-InputField" p:label="Roll-up" p:propertyName="rollup.name" p:width="25%"/>
                                    <bean parent="Uif-InputField" p:propertyName="chargeAmount" p:label="Charges" p:width="15%" p:labelPlacement="TOP" p:style="align: right;"/>
                                    <bean parent="Uif-InputField" p:propertyName="paymentAmount" p:label="Payments" p:width="15%" p:labelPlacement="TOP" p:align="right"/>
                                    <bean parent="Uif-InputField" p:propertyName="defermentAmount" p:label="Deferments" p:width="15%" p:labelPlacement="TOP" p:align="right"/>
                                    <bean parent="Uif-InputField" p:propertyName="allocatedAmount" p:label="Allocated" p:width="15%" p:labelPlacement="TOP" p:align="right"/>
                                    <bean parent="Uif-InputField" p:propertyName="unallocatedAmount" p:label="Unallocated" p:width="15%" p:labelPlacement="TOP" p:align="right"/>
                                </list>
                            </property>

                            <!-- From what I can tell, this does nothing.  Refer to https://jira.kuali.org/browse/KULRICE-8747 -->
                            <property name="layoutManager.rowDetailsSwapActionImage" value="true"/>
                            <property name="layoutManager.rowDetailsGroup">
                                <ref bean="rollupTransactionList"/>
                            </property>

                        </bean>
                        <!--<bean parent="Uif-CollectionGroupBase" p:title="Roll-up"  p:propertyName="rollupTransactions"
                                        p:collectionObjectClass="com.sigmasys.kuali.ksa.krad.model.TransactionModel">

                        </bean>-->
                    </list>
                </property>
            </bean>
            </list></property></bean>
        </list>
        </property>


    </bean>

    <!--
    <bean id="" parent="Uif-CollectionGroupBase" p:title="Transactions" p:propertyName="subTransactions"
          p:collectionObjectClass="com.sigmasys.kuali.ksa.krad.model.TransactionModel">
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="id"/>
            </list>
        </property>
    </bean>
    -->

    <bean id="rollupTransactionList" parent="Uif-TableSubCollection-WithinSection" p:layoutManager.numberOfColumns="4">
        <property name="headerText" value="Transactions" />
        <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.krad.model.TransactionModel" />
        <property name="propertyName" value="subTransactions" />
        <property name="layoutManager.sequencePropertyName" value="id" />
        <property name="layoutManager.richTable.render" value="true" />
        <property name="layoutManager.renderSequenceField" value="false"/>
        <!--<property name="style" value="background: #CCC;"/>-->
        <!--<property name="disclosure.collapseImageSrc" value="../images/alert.png"/>-->
        <!--<property name="layoutManager.columnCalculations">
            <list>
                <bean parent="Uif-ColumnCalculationInfo-Sum" p:propertyName="unallocatedAmount"/>
            </list>
        </property>-->
        <property name="layoutManager.richTable.templateOptions">
            <map merge="true">
                <entry key="bPaginate" value="false"/>
                <entry key="bInfo" value="false"/>
                <entry key="bFilter" value="false"/>
            </map>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:propertyName="effectiveDate" p:label="Effective"/>
                <bean parent="Uif-InputField" p:propertyName="transactionType.description" p:label="Description"/>
                <bean parent="Uif-InputField" p:propertyName="chargeAmount" p:label="Charges" p:width="15%" p:labelPlacement="TOP" p:style="align: right;"/>
                <bean parent="Uif-InputField" p:propertyName="paymentAmount" p:label="Payments" p:width="15%" p:labelPlacement="TOP" p:align="right"/>
                <bean parent="Uif-InputField" p:propertyName="defermentAmount" p:label="Deferments" p:width="15%" p:labelPlacement="TOP" p:align="right"/>
                <bean parent="Uif-InputField" p:propertyName="allocatedAmount" p:label="Allocated" p:width="15%" p:labelPlacement="TOP" p:align="right"/>
                <bean parent="Uif-InputField" p:propertyName="unallocatedAmount" p:label="Unallocated" p:width="15%" p:labelPlacement="TOP" p:align="right"/>
            </list>
        </property>
    </bean>


</beans>