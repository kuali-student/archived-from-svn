<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                           http://www.springframework.org/schema/util
                           http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <bean id="StudentTransactionOverview" parent="Uif-FormView" p:footer.render="false">
        <property name="title" value="Student Transaction Overview"/>
        <property name="formClass" value="com.sigmasys.kuali.ksa.krad.form.TransOvrForm"/>
        <property name="theme">
            <bean parent="Uif-KradTheme"/>
        </property>
        <property name="entryPageId" value="QuickMenuOptionsPage"/>
        <property name="navigation">
            <ref bean="KSATransOvrVwNav"/>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-Page" p:id="QuickMenuOptionsPage" p:title="Quick Options">
                    <property name="items">
                        <list>
                            <ref bean="QuickOptions"/>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-Page" p:id="StudentTransactionLookupPage" p:title="Query for Persons">
                    <property name="items">
                        <list>
                            <ref bean="QueryByName"/>
                        </list>
                    </property>
                </bean>
                <bean parent="Uif-Page" p:id="TransByPersonPage" p:title="Transactions for selected Person">
                    <property name="items">
                        <list>
                            <ref bean="StudentTransactionsReviewPage"/>
                        </list>
                    </property>
                </bean>
<!--
                <bean parent="Uif-Page" p:id="AlertsPage" p:title="Alerts">
                    <property name="items">
                        <list>
                            &lt;!&ndash;<ref bean="UifLayoutView-BoxHorizontalNestedVertical"/>
                            <ref bean="UifLayoutView-BoxVerticalNestedHorizontal"/>
                            <ref bean="UifLayoutView-BoxNestedControls"/>&ndash;&gt;
                        </list>
                    </property>
                </bean>

                <bean parent="Uif-Page" p:id="HistoryPage" p:title="Transactions">
                    <property name="items">
                        <list>
                            &lt;!&ndash;<ref bean="UifLayoutView-BoxHorizontalNestedVertical"/>
                            <ref bean="UifLayoutView-BoxVerticalNestedHorizontal"/>
                            <ref bean="UifLayoutView-BoxNestedControls"/>&ndash;&gt;
                        </list>
                    </property>
                </bean>
-->

            </list>
        </property>
    </bean>

    <!-- Student Account navigation menu by tabs -->
<!--    <bean parent="Uif-TabNavigationGroup" id="StudentTransactionOverview-Menu">
        <property name="items">
            <list>
                <bean parent="Uif-NavigationActionLink" p:navigateToPageId="StudentTransactionLookupPage" p:actionLabel="Summary"/>
                <bean parent="Uif-NavigationActionLink" p:navigateToPageId="AlertsPage" p:actionLabel="Alerts"/>
                <bean parent="Uif-NavigationActionLink" p:navigateToPageId="HistoryPage" p:actionLabel="History"/>
            </list>
        </property>
    </bean>-->

    <bean id="KSATransOvrVwNav" parent="Uif-MenuNavigationGroup">
        <property name="items">
            <list>
                <bean parent="Uif-HeaderField-Two" p:headerText="KSA Navigation"/>
                <bean parent="Uif-NavigationActionLink" p:navigateToPageId="QuickMenuOptionsPage"
                      p:actionLabel="Quick Options"/>
<!--                <bean parent="Uif-NavigationActionLink" p:navigateToPageId="StudentTransactionLookupPage"
                      p:actionLabel="Transaction Summary Overview"/>-->
            </list>
        </property>
    </bean>

    <!-- A quick menu of options with links to other pages -->
    <bean id="QuickOptions" parent="Uif-VerticalBoxSection"
        p:layoutManager.orientation="VERTICAL"
        p:title="Find accounts by name"
        p:instructionalText="Select a quick navigation link from the options listed here.">
        <property name="disclosure.render" value="false" />
        <property name="items">
            <list>
                <bean parent="Uif-Link" p:linkLabel="Transactions for a Person" p:target="_self"
                      p:hrefText="transOvrVw?methodToCall=get&amp;viewId=StudentTransactionOverview&amp;pageId=StudentTransactionLookupPage"/>
                <bean parent="Uif-Link" p:linkLabel="Currency Type" p:target="_self"
                      p:hrefText="currencyList?methodToCall=get&amp;viewId=CurrencyListView"/>
            </list>
        </property>
    </bean>

    <!-- Lookup a person, select to view their transactions and drill down to transaction detail -->
    <bean id="QueryByName" parent="Uif-VerticalBoxSection"
          p:layoutManager.orientation="VERTICAL"
          p:title="Find accounts by name">
        <property name="disclosure.render" value="false" />
        <property name="items">
            <list>
                <ref bean="FindMatchesByAccountName" />
                <!--p:progressiveRenderViaAJAX="true" p:progressiveRender="studentLookupByName eq 'showTxNameMatches'" p:disclosure.render="false"-->
                <bean parent="Uif-Disclosure-TableCollectionSection" p:layoutManager.numberOfColumns="3"
                      p:disclosure.render="false"
                      p:progressiveRenderViaAJAX="true"
                      p:title="Matching Persons and Description"
                      p:instructionalText="Select a line item to view transactions for the person.">
                    <property name="readOnly" value="true"/>
                    <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.model.Account"/>
                    <property name="propertyName" value="accountBrowseList"/>
                    <property name="layoutManager.sequencePropertyName" value="id"/>
                    <property name="layoutManager.richTable.render" value="false"/>
                    <property name="layoutManager.renderSequenceField" value="false"/>
                    <property name="items">
                        <list>
                            <bean parent="Uif-InputField" p:label="Name" p:propertyName="compositeDefaultPersonName" >
                                <property name="control">
                                    <bean parent="Uif-TextControl" p:size="60" p:maxLength="59"/>
                                </property>
                            </bean>
                            <bean parent="Uif-InputField" p:label="Descriptione" p:propertyName="compositeDefaultPostalAddress" >
                                <property name="control">
                                    <bean parent="Uif-TextControl" p:size="300" p:maxLength="299"/>
                                </property>
                            </bean>
                            <bean parent="Uif-Link" p:linkLabel="Select" p:target="_self"
                                  p:hrefText="transOvrVw?methodToCall=get&amp;viewId=StudentTransactionOverview&amp;pageId=TransByPersonPage&amp;id=@{#line.id}" />
                                  <!--p:hrefText="chargeMaintVw?viewId=ChargeMaintenanceVw&amp;methodToCall=get&amp;id=@{#line.id}"/>-->
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>


    <bean id="FindMatchesByAccountName" parent="Uif-HorizontalBoxSection">
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:label="Search By Name"
                      p:instructionalText="Enter a name to search transactions"
                      p:width="auto" p:propertyName="studentLookupByName" p:required="true">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="25" p:maxLength="100">
<!--
                            <property name="options">
                                <list>
                                    <bean parent="Uif-KeyLabelPair" p:key="showTxNameMatches"
                                          p:value="Show Transaction Match for search criteria" />
                                </list>
                            </property>
-->
                        </bean>
                    </property>
                </bean>
                <bean parent="Uif-PrimaryActionButton-Small" p:methodToCall="searchByName" p:actionLabel="Search">
                    <property name="actionImage">
                        <bean parent="Uif-ImageField"
                              p:source="@{#ConfigProperties['krad.externalizable.images.url']}searchicon.gif"/>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

    <!-- A quick menu of options with links to other pages -->
    <bean id="StudentTransactionsReviewPage" parent="Uif-VerticalBoxSection"
          p:layoutManager.orientation="VERTICAL"
          p:title="Selected Transactions"
          p:instructionalText="The following is a list of transactions for the selected person">
        <property name="disclosure.render" value="false" />
        <property name="items">
            <list>
                <bean parent="Uif-Disclosure-TableCollectionSection" p:layoutManager.numberOfColumns="5"
                      p:disclosure.render="false"
                      p:progressiveRenderViaAJAX="true"
                      p:title="Charges"
                      p:instructionalText="Select a line item to view transactions for the person.">
                    <property name="readOnly" value="true"/>
                    <property name="collectionObjectClass" value="com.sigmasys.kuali.ksa.model.Charge"/>
                    <property name="propertyName" value="chargeList"/>
                    <property name="layoutManager.sequencePropertyName" value="id"/>
                    <property name="layoutManager.richTable.render" value="false"/>
                    <property name="layoutManager.renderSequenceField" value="false"/>
                    <property name="items">
                        <list>
                            <bean parent="Uif-InputField" p:label="Ledger Date" p:propertyName="ledgerDate" p:required="true"/>
                            <bean parent="Uif-InputField" p:label="Description" p:propertyName="statementText" p:required="true"
                                  p:constraintText="Requires Date be filled out">
                                <property name="dependencyConstraints">
                                    <list>
                                        <bean parent="PrerequisiteConstraint" p:propertyName="ledgerDate"/>
                                    </list>
                                </property>
                            </bean>
                            <bean parent="Uif-InputField" p:label="Amount" p:propertyName="amount" p:required="true"/>
                            <bean parent="Uif-InputField" p:label="Currency" p:propertyName="currency.iso" p:required="true"/>
                            <bean parent="Uif-Link" p:linkLabel="Details" p:target="_self"
                                  p:hrefText="chargeMaintVw?viewId=ChargeMaintenanceVw&amp;methodToCall=get&amp;id=@{#line.id}"/>
                            <!--p:hrefText="chargeMaintVw?viewId=ChargeMaintenanceVw&amp;methodToCall=get&amp;id=@{#line.id}"/>-->
                        </list>
                    </property>
                </bean>
<!--
                <bean parent="Uif-Link" p:linkLabel="Transactions for a Person" p:target="_self"
                      p:hrefText="transOvrVw?methodToCall=get&amp;viewId=StudentTransactionOverview&amp;pageId=StudentTransactionLookupPage"/>
                <bean parent="Uif-Link" p:linkLabel="Currency Type" p:target="_self"
                      p:hrefText="currencyList?methodToCall=get&amp;viewId=CurrencyListView"/>
-->
            </list>
        </property>
    </bean>

</beans>